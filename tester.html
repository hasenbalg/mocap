<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>

  </body>
  <script src="js/leap-0.6.3.min.js"></script>

  <script type="text/javascript">
  var start_time =0;
  var zero_point;
  var previousFrame = null;
  Leap.loop({enableGestures: true}, function(frame) {
    // console.log(frame.timestamp/1000000);
    // console.log(frame.timestamp/1000000 - start_time);
    console.log(frame.hands.length);
    if (frame.hands.length > 0) {
      if(frame.timestamp/100000 - start_time > 3){
        if(!zero_point) {
          zero_point = frame.hands[0].palmPosition;
        }
        for (var i = 0; i < frame.hands.length; i++) {
          var hand = frame.hands[i];
          if (previousFrame && previousFrame.valid) {
            if(hand.grabStrength < .5){
              var translation = {x: hand.palmPosition[0] - zero_point[0], y: hand.palmPosition[1] - zero_point[1]};
              // var translation = hand.translation(previousFrame);
              // console.log(translation);
              // translation[0] = Math.round(translation[0]*100)/100;
              // translation[1] = Math.round(translation[1]*100)/100;

              console.log((hand.type == 'left' ? translation.x + '\n' + translation.y : ''));
              y_speed = translation[0] /100;
              x_speed = translation[1] /250;
            }else {
              x_speed = 0;
              y_speed = 0;
            }
          }
        }
      }else {
        x_speed = 0;
        y_speed = 0;
      }
    }else{
      start_time = frame.timestamp/100000;
      zero_point = null;
      x_speed = 0;
      y_speed = 0;
    }
    previousFrame = frame;
  });

  </script>
</html>
